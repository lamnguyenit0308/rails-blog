<div class="post-show">
  <div class="post-info d-flex justify-content-between" style="gap: 20px;">
    <div class="d-flex" style="gap: 20px;">
      <p><strong>Created at:</strong> <%= @post.created_at.strftime("%d/%m/%Y") %></p>
      <p><strong>Creator:</strong> <%= @post.user.email %></p>
    </div>
    <div class="post-action">
      <a href="<%= edit_post_path(@post) %>" class="btn btn-outline-secondary btn-sm">Edit</a>
      <%= link_to "Delete", post_path(@post), method: :delete, data: {
        turbo_method: :delete,
        turbo_confirm: "Are you sure delete this post?"
      }, class: "btn btn-outline-danger btn-sm" %>
    </div>
  </div>
  <div class="title">
    <h1>
      <%= @post.title %>
    </h1>
  </div>
  <div class="content">
    <%= raw @post.content %>
  </div>
</div>

<h2>Comments</h2>
<% @comments.each do |comment| %>
  <div class="comment card">
    <div class="card-body">
      <p class="card-text"><%= comment.content %></p>
      <p class="card-text"><small class="text-muted"><%= comment.user.email %></small></p>
      <a class="btn btn-outline-primary" data-bs-toggle="collapse" href="#show-reply-comment-<%= comment.id %>" role="button" aria-expanded="false" aria-controls="collapseExample">
        Show all reply
      </a>
      <div class="collapse mt-3" id="show-reply-comment-<%= comment.id %>">
        <div class="card card-body">
          <% comment.replies.each do |reply| %>
            <p>
              <strong>Reply:</strong>
              <%= reply.title %>
            </p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
<% end %>
<div class="mt-3 d-flex justify-content-center">
  <%== pagy_bootstrap_nav(@pagy) if @pagy.pages > 1 %>
</div>

<h2>Add a comment:</h2>
<%= form_with model: [ @post, @post.comments.build ] do |form| %>
  <p>
    <%= form.label :title %><br>
    <%= form.text_field :title %>
  </p>
  <p>
    <%= form.label :content %><br>
    <%= form.text_area :content %>
  </p>
  <p>
    <%= form.submit %>
  </p>
<% end %>
